<div class="payment">
    <!-- Header -->
    <div class="payment__header">
        <div class="container-fluid">
            <button routerLink="/pages/camera/cart" class="back btn material-icons"> arrow_right_alt </button>
            <span class="payment__header-title">Thanh toán</span>
            <button routerLink="/pages/camera" class="closePayment btn material-icons">close</button>
        </div>
    </div>

    <!-- Methods -->
    <div class="methods">
        <div class="container-fluid">
            <!-- Option -->
            <div class="methods__option">
                <!-- Thanh toan truc tiep tai cua hang -->
                <div class="methods__option-title" *ngIf="isDirect">
                    Trực tiếp tại cửa hàng
                    <button class="changeOption" (click)="changeOption()">Thay đổi</button>
                </div>

                <div class="methods__option-title" *ngIf="!isDirect">
                    Giao hàng tận nơi
                    <button class="changeOption" (click)="changeOption()">Thay đổi</button>
                </div>

                <div class="guide" *ngIf="isDirect">
                    <div class="guide__title">Hướng dẫn thanh toán</div>
                    <div class="guide__content">
                        Khi đến, bạn hãy đọc cho nhân viên cửa hàng mã đơn hàng này : {{tempOrderID}}
                    </div>
                </div>


                <!-- Shipping -->
                <div class="address" *ngIf="isShipping">
                    <div class="container">
                        <div class="row">
                            <!-- Map icon -->
                            <div class="col-2 map-col">
                                <span class="material-icons">
                                    place
                                </span>
                            </div>
                            <!-- Address -->
                            <div class="col-10 address-col">
                                <label class="address__title">
                                    Giao đến địa chỉ:
                                    <span *ngIf="addressError" class="errorText">{{(addressError)}}</span>
                                </label>
                                <textarea type="text" class="addressInput" [(ngModel)]="addressInput"
                                    placeholder="Thôn x, Xã y, Phường z"></textarea>
                            </div>
                            <!-- Note -->
                            <div class="col-12 address-note">
                                <!-- title -->
                                <div class="address-note__title">
                                    Yêu cầu thêm
                                </div>
                                <input type="text" placeholder="Ví dụ: Chỉ nhận hàng vào buổi chiều"
                                    [(ngModel)]="addressNote">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Select store -->
    <div class="store__options" *ngIf="isDirect">
        <div class="container">
            <div class="store__options-title">
                Chọn một cửa hàng gần nhất mà bạn muốn đến để thanh toán và nhận đồ:
            </div>
            <!-- alert if -->
            <p class="errorText">{{selectStoreErr}}</p>
            <!-- select store -->
            <div class="wrapper">
                <div class="select-store" *ngFor="let store of storesToChoose">
                    <input type="checkbox" id="{{store.id}}">
                    <label for="{{store.id}}" class="select-store__label" (click)="changeStore($event)"></label>
                    <div class="icon">
                        <span class="material-icons">store</span>
                        <p style="margin: 0">
                            {{store.ten}} - {{store.address}}
                        </p>
                    </div>
                </div>
                <!-- extra fee select -->
                <div class="extra" *ngIf="selectStoreErr">
                    <input type="checkbox" id="extra">
                    <label for="extra" (click)="acceptExtra($event)"></label>
                    <span>Nếu bạn vẫn muốn nhận tại cửa hàng đã chọn, bạn phải trả thêm tiền phí </span>
                </div>
            </div>
        </div>
    </div>
    <!-- Recipient information when customer selects shipping -->
    <div class="recipient" *ngIf="isShipping">
        <div class="container-fluid">
            <div class="recipient__title">
                Thông tin người nhận
            </div>
            <!-- Name -->
            <div class="recipient__name">
                <label class="recipient__name-title">
                    Người nhận
                    <span *ngIf="nameError" class="errorText">{{(nameError)}}</span>
                </label>
                <input type="text" class="recipientName" [(ngModel)]="recipientName"
                    placeholder="Nhập tên người nhận tại đây">
            </div>
            <!-- Phone number -->
            <div class="recipient__phone">
                <label class="recipient__phone-title">
                    Số điện thoại
                    <span *ngIf="phoneError" class="errorText">{{(phoneError)}}</span>
                </label>
                <input type="text" class="recipientPhone" [(ngModel)]="recipientPhone"
                    placeholder="Bấm vào để nhập số điện thoại">
            </div>
        </div>
    </div>

    <!-- Cash -->
    <div class="cash" *ngIf="isShipping">
        <div class="container-fluid">
            <!-- title -->
            <div class="cash__title">Thanh toán</div>
            <!-- ways -->
            <form class="cash__ways">
                <div class="cash__ways-direct">
                    <input type="checkbox" id="option1" name="option" (change)="chooseMethod(1, $event)" value="cash"
                        checked="true">
                    <label for="option1" class="option-label"></label>
                    <!-- icon -->
                    <span class="material-icons cash__ways-icon">
                        attach_money
                    </span>
                    <span class="option-title">
                        Tiền mặt
                    </span>
                </div>
                <div class="cash__ways-transfer">
                    <input type="checkbox" id="option2" name="option" (change)="chooseMethod(2, $event)"
                        value="transfer">
                    <label for="option2" class="option-label"></label>
                    <!-- icon -->
                    <span class="material-icons-outlined cash__ways-icon">
                        account_balance_wallet
                    </span>
                    <span class="option-title">
                        Chuyển khoản đến STK BIDV 12110000443633
                        <!-- BIDV CN Hai Bà Trưng, HN -->
                    </span>
                </div>
            </form>
        </div>
    </div>

    <!-- Cart Information -->
    <div class="cart-information">
        <div class="container-fluid">
            <div class="row align-items-center">
                <!-- Information -->
                <div class="col-6">
                    <p class="goods">
                        {{totalProducts}} món trong giỏ hàng
                    </p>
                    <p class="total">
                        {{totalMoneyToShow}}
                    </p>
                </div>
                <!-- Finish payment -->
                <div class="col-6">
                    <div class="wrapper">
                        <!-- When shipping -->
                        <button *ngIf="isShipping" class="finishBtn" (click)="checkDataToCreateOrder()">
                            Đặt hàng
                        </button>
                        <!-- When pay at selected store -->
                        <button *ngIf="!isShipping" class="finishBtn" (click)="checkToCreateOrder()"
                            [disabled]="!isDone">
                            Xác nhận
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- Dialog opens when click change button -->
    <div class="changeContent closedContent">
        <div class="container-fluid">
            <!-- Header -->
            <div class="header">
                <button id="changeContentBtn" class="header__close btn material-icons"
                    (click)="closeChange()">close</button>
            </div>

            <!-- Content -->
            <div class="content">
                <!-- Title -->
                <div class="content__title">
                    <!-- Icon -->
                    <span class="material-icons">
                        receipt_long
                    </span>
                    <h3 class="content__title-heading">Chọn phương thức thanh toán</h3>
                </div>

                <!-- Options -->
                <div class="content__options">
                    <div class="option shipping" (click)="clickChange($event)">
                        <!-- Icon -->
                        <span class="material-icons shipping">
                            delivery_dining
                        </span>
                        <h4 class="option__heading shipping">Giao tận nơi</h4>
                        <div class="option__text shipping">
                            Đồ bạn lựa chọn sẽ được giao đến địa chỉ của bạn
                        </div>
                    </div>
                    <div class="option direct" (click)="clickChange($event)">
                        <!-- Icon -->
                        <span class="material-icons direct">
                            store
                        </span>
                        <h4 class="option__heading direct">Tại cửa hàng</h4>
                        <div class="option__text direct">
                            Bạn chỉ cần đưa mã giỏ hàng cho nhân viên
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>